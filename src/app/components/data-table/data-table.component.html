<ng-template [ngIf]="dataTable">
<p class="bg-danger error-message" style="margin: 5px" *ngIf="errorMessage">{{errorMessage}}</p>
<div class="data-table-wrapper {{dataTable.wrapperStyleClass}}">
    <ng-template [ngIf]="initialized && (data == undefined || data.length == 0)">
        <div class="data-table-empty-message {{dataTable.noDataMessageStyleClass}}">
            {{dataTable.noDataMessage}}
        </div>
    </ng-template>
    <p class="bg-success data-table-message" *ngIf="infoMessage">{{infoMessage}} <span class="close-data-table-message" (click)="infoMessage = null">&times;</span></p>
    <p class="bg-danger data-table-message" *ngIf="instantErrorMessage">{{instantErrorMessage}} <span class="close-data-table-message" (click)="instantErrorMessage = null">&times;</span></p>

    <ng-template [ngIf]="data.length > 0">
        <div class="column-resize-ref"></div>
        <table class="table data-table {{dataTable.tableStyleClass}}" [ngClass]="{'table-hover':dataTable.selectable && dataTable.selectionType != 'checkbox'}">
            <ng-template [ngIf]="dataTable.caption != undefined">
                <caption>
                    {{dataTable.caption}}
                    <i *ngIf="dataTable.refreshButton" class="fa fa-refresh cursor-pointer pull-right" (click)="refresh()" aria-hidden="true"></i>
                </caption>
            </ng-template>
            <thead *ngIf="dataTable.showHeader">
                <tr>
                   <ng-template ngFor let-column [ngForOf]="dataTable.columns" let-i="index">
                        <th *ngIf="!column.actionType" [width]="column.width">
                            <div *ngIf="column.resizable" class="column-resize-handler" (mousedown)="setColumnResize($event)"></div>

                            {{ column.displayName }}

                            <ng-template [ngIf]="column.sortable">
                                <span (click)="sort(column, i)" *ngIf="!column.isSorting" class="fa fa-sort sortable-column" title="Sort by {{column.displayName }}"></span>
                                <span (click)="sort(column, i)" *ngIf="column.isSorting && column.sortDir == ASCENDING" class="fa fa-sort-asc sortable-column"></span>
                                <span (click)="sort(column, i)" *ngIf="column.isSorting && column.sortDir == DESCENDING" class="fa fa-sort-desc sortable-column"></span>
                            </ng-template>
                            <ng-template [ngIf]="column.filter">
                                <div>
                                    <div class="form-group clearable-input-box table-filter">
                                        <input [(ngModel)]="column.filterValue" class="form-control" style="width: auto" type="text" (keyup)="filterTable(column, $event.currentTarget['value'])">
                                        <span class="clear-input-box" *ngIf="getFilter(column)" (click)="filterTable(column, '')">&times;</span>
                                    </div>
                                </div>
                            </ng-template>

                        </th>
                        <td *ngIf="column.actionType" [width]="column.width">
                            <input *ngIf="dataTable.showSelectAll && column.actionType == 'checkbox'" type="checkbox" (change)="toggleSelectRows($event)">
                        </td>
                    </ng-template>
                </tr>
            </thead>

            <tbody>
            <ng-template ngFor let-item [ngForOf]="data" let-i="index">
                <tr [ngClass]="{'info':item.isSelected}" (click)="toggleSelectRow(i)">

                    <ng-template ngFor let-column [ngForOf]="dataTable.columns" let-idx="index">
                        <td id="row-{{i}}-column-{{idx}}" class="{{column.columnClass}}" [style.width]="column.width">
                            <span class="{{column.class}}" (click)="setToEdit(column, item)">{{getValue(item, column)}}</span>
                        </td>
                    </ng-template>
                </tr>
            </ng-template>
            </tbody>
        </table>

        <mp-data-table-pagination-control *ngIf="totalItems > 0" [totalItems]="totalItems"
                                       [pageSize]="dataTable.dataRequestModel.pageSize"
                                       [pagination]="dataTable.pagination"
                                       [currentPage]="dataTable.dataRequestModel.page"
                                       (goToPageEvent)="goToPage($event)"
                                       (changePageSizeEvent)="changePageSize($event)">

        </mp-data-table-pagination-control>

        <div class="clearfix"></div>
    </ng-template>
    <mp-loading *ngIf="isLoading"></mp-loading>
</div>
</ng-template>